<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <img src="../imgs/链式调用.svg" alt="">
    <pre>
        Promise-链式调用

        概念:依靠then()方法会返回一个新生成的Promise对象特性,继续串联下一环任务,直到结束


        1.什么是Promise的链式调用？
        使用then函数返回新Promise对象特性,一直串联下去   
        2.then回调函数中,return的值会传给哪里?
        传给the函数生成的新Promise对象  
        3.Promise链式调用有什么用?
        解决回调函数嵌套问题


    </pre>
    <img src="../imgs/回调.svg" alt="">

    <script>
         
        /**
         * 目标:掌握Promise的链式调用
         * 需求:把省市的嵌套结构,改成链式调用的线性结构
         * 
         */
         
         //1.创建promise对象-模拟请求省份的名字  
         const p =new Promise((resolve,reject)=>{
            setTimeout(()=>{
                resolve('北京市')
                
            },2000)
         }) 

         //2.获取省份的名字
         const p2 = p.then(result=>{
            console.log(result)

            //3.创建一个Promise对象-模拟请求城市名字
            //return Promise对象最终态和结果，影响到新的Promise对象
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{
                    resolve(result+'---北京')  //北京市---北京
                },2000)
            })
         })


         //4.获取城市名字
         p2.then(result=>{
            console.log(result)
         })
         console.log(p2 === p)  //三等运算符看的是内存地址,看看
         //false说明不是同一个,也就是说p2是开辟了一个新的地址,p2是新生成



         
         
    
    </script>
    
  
</body>
</html>