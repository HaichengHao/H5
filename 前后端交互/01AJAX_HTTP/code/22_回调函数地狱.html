<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="wclassth=device-wclassth, initial-scale=1.0"> -->
    <title>Document</title>
</head>

<body>
    <pre>
        回调函数地狱

        需求:展示默认第一个省,第一个城市,第一个地区在下拉菜单中
        概念:在回调函数中嵌套回调函数,一直嵌套下去就形成了回调函数地狱
        缺点:可读性差,异常无法捕获,耦合性严重,牵一发动全身

        回调函数地狱问题
        可读性差
        异常捕获困难
        耦合性严重

    </pre>
    <form>
        <sapn>省份:</sapn>
        <select name="省份" class="province">
            <option value="">北京</option>
            <option value="">天津</option>
        </select>
        <sapn>城市:</sapn>
        <select name="城市" class="city">
            <option value="">北京市</option>
        </select>
        <sapn>地区:</sapn>
        <select name="地区" class="area">
            <option value="">东城区</option>
        </select>
    </form>

    <script src="/axios.min.js"></script>
    <script>

        //下面就是回调地狱
        axios({
            url: 'https://hmajax.itheima.net/api/province'
        }).then(result => {
            const pname = result.data.list[0]
            document.querySelector('.province').innerHTML = pname

            //获取第一个省份默认下属第一个城市名字
            axios({
                url: 'https://hmajax.itheima.net/api/city',
                params: {
                    pname
                }
            }).then(result => {
                const cname = result.data.list[0]
                document.querySelector('.city').innerHTML = cname

                //选取第一个城市默认下属第一个地区名字   
                axios({
                    url: 'https://hmajax.itheima.net/api/area',
                    params: {
                        pname,
                        cname
                    }
                }).then(result => {

                    //如果像这样写 document.querySelector('.area').innerHTML = result.data.list[0]就会进入回调地狱
                    const areaName = result.data.list[0]
                    document.querySelector('.area').innerHTML = areaName
            })
            
        }).catch(error => {
            console.log(error)
        })





    </script>
</body>

</html>