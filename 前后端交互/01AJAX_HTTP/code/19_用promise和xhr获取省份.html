<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <p></p>
    <script>
        // function resolve() {
        //     const xhr = new XMLHttpRequest()
        //     xhr.open(
        //         'get',
        //         'https://hmajax.itheima.net/api/province'
        //     )
        //     xhr.addEventListener('loadend', () => {
        //         console.log(xhr.response)
        //     })

        //     xhr.send()

        // }
        const p = new Promise((resolve, reject) => {

            const xhr = new XMLHttpRequest()
            xhr.open(
                'get',
                'https://hmajax.itheima.net/api/province'
            )
            xhr.addEventListener('loadend', () => {
                //xhr如何判断响应成功还是失败的?
                //利用响应状态码,2xx开头是成功
                //4xx开头和5xx开头分别是客户端和服务端错误
                if(xhr.status>=200&&xhr.status< 300 ){
                    resolve(JSON.parse(xhr.response))
                }else{
                    reject(new Error(xhr.response))
                }
                // console.log(xhr.response)
            })

            xhr.send()

        })
        p.then(
            result => {
                console.log(result)
                document.querySelector('p').innerHTML = result.list.join('<br>')
            }
        ).catch(
            error => {
                console.log(error)
            }
        )
    </script>
</body>

</html>